<!DOCTYPE html>
<html>
  <head>
    <title>Whimmy</title>
    <!-- <meta
      http-equiv="Content-Security-Policy"
      content="
    default-src 'self';
    img-src 'none';
    child-src 'self';
    script-src 'self' 'unsafe-inline';
    style-src 'unsafe-inline';
    connect-src https://whimmy.com/ whimmyapp:; ws://*"
    /> -->
    <script src="assets/blockstack-19.1.0.min.js"></script>
    <script>
      function getParameterByName(name) {
        var match = RegExp('[?&]' + name + '=([^&]*)').exec(
          window.location.search
        );
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
      }

      if (
        typeof blockstack !== 'undefined' &&
        typeof blockstack.protocolEchoReplyDetection !== 'undefined' &&
        blockstack.protocolEchoReplyDetection()
      ) {
        // do nothing, page will be redirected
      } else {
        var authResponse = getParameterByName('authResponse');

        if (authResponse) {
          window.location = 'whimmyapp:' + authResponse;

          setTimeout(function() {
            window.location = 'https://whimmy.com/';
          }, 3000);
        }
      }
    </script>
  </head>
  <body></body>
</html>
